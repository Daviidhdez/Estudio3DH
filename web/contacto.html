<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="../css/style.css">
</head>

<body>

  <header>
    <nav>
      <ul>
        <li><a href="./index.html">Inicio</a></li>
        <li><a href="../web/Nosotros.html">Sobre Nosotros</a></li>
        <li><a href="../web/portafolio.html">Portfolio</a></li>
        <li><a href="../web/servicios.html">Servicios</a></li>
        <li><a href="../web/contacto.html">Contacto</a></li>
      </ul>
    </nav>
  </header>

  <section id="contacto" class="section contacto">
    <div class="container">
      <h2>Contacto</h2>
      <p>¿Interesado en saber más sobre nuestros servicios? ¡Escríbenos!</p>

      <form id="contact-form" novalidate>
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" name="nombre" placeholder="Tu nombre completo" required>

        <label for="email">Correo electrónico:</label>
        <input type="email" id="email" name="email" placeholder="tuemail@ejemplo.com" required>

        <label for="mensaje">Mensaje:</label>
        <textarea id="mensaje" name="mensaje" rows="5" placeholder="Escribe tu mensaje aquí..." required></textarea>

        <button type="submit" class="btn enviar-btn">Enviar</button>
      </form>
    </div>


  </section>
  <div id="chatbot-button">
    <img src="../img/robot.png" alt="Asistente virtual de Estudio-3DH" />
  </div>

  <div id="chatbot-window" class="hidden">
    <div id="chatbot-header">
      <h3>¿Necesitas ayuda?</h3>
      <button id="chatbot-close">×</button>
    </div>
    <div id="chatbot-messages">
      <div class="bot-message">¡Hola! Soy EstudioDH Bot. ¿En qué puedo ayudarte?</div>
    </div>
    <input type="text" id="chatbot-input" placeholder="Escribe tu pregunta..." />
  </div>
  <footer>
    <div class="footer-container">
      <p>&copy; 2025 EstudioDH. Todos los derechos reservados.</p>
      <p>
        Síguenos:
        <a href="https://www.instagram.com/studio_3dh/" target="_blank" rel="noopener noreferrer"><i
            class="fa fa-instagram" aria-hidden="true"></i>Instagram</a>
      </p>
    </div>
  </footer>

  <script>
    function toggleFormulario() {
      const formulario = document.getElementById('formulario-contacto');
      formulario.classList.toggle('oculto');
      // Cambiar aria-hidden para accesibilidad
      formulario.setAttribute('aria-hidden', formulario.classList.contains('oculto'));
    }
  </script>

  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
  <script>
    emailjs.init("4D53Y4dgNdMMzR8rs"); // tu User ID

    const form = document.getElementById('contact-form');

    form.addEventListener('submit', function (event) {
      event.preventDefault();

      // Limpiar errores previos
      document.querySelectorAll('.error').forEach(el => el.classList.remove('error'));
      document.querySelectorAll('.error-message').forEach(el => el.remove());

      let valid = true;

      const nombre = document.getElementById('nombre');
      const email = document.getElementById('email');
      const mensaje = document.getElementById('mensaje');

      // Validar nombre
      if (nombre.value.trim() === "") {
        showError(nombre, "Campo obligatorio");
        valid = false;
      }

      // Validar email
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (email.value.trim() === "") {
        showError(email, "Campo obligatorio");
        valid = false;
      } else if (!emailRegex.test(email.value.trim())) {
        showError(email, "Correo no válido");
        valid = false;
      }

      // Validar mensaje
      if (mensaje.value.trim() === "") {
        showError(mensaje, "Campo obligatorio");
        valid = false;
      }

      if (!valid) return;

      // Si todo es válido, enviar con EmailJS
      emailjs.sendForm('service_studiodh', 'template_studiodh', this)
        .then(() => {
          alert('Correo enviado con éxito, ¡gracias por contactarnos!');
          form.reset();
        })
        .catch((error) => {
          console.error('Error al enviar:', error);
          alert('Hubo un error al enviar el correo. Revisa la consola.');
        });
    });

    function showError(element, message) {
      element.classList.add('error');
      const msg = document.createElement('div');
      msg.classList.add('error-message');
      msg.innerText = message;
      element.parentNode.insertBefore(msg, element.nextSibling);
    }
  </script>





</body>

</html>